"use strict";(self.webpackChunkdiplom=self.webpackChunkdiplom||[]).push([[193],{3193:(V,_,c)=>{c.r(_),c.d(_,{AccountModule:()=>O});var n=c(4182),m=c(9808),a=c(9556),e=c(2096),l=c(5072),d=c(4653);function C(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"a",1),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.oxw().removeAlert(o)}),e._uU(2,"\xd7"),e.qZA(),e._UZ(3,"span",2),e.qZA()}if(2&i){const t=u.$implicit,s=e.oxw();e.Tol(s.cssClass(t)),e.xp6(3),e.Q6J("innerHTML",t.message,e.oJD)}}let h=(()=>{class i{constructor(t,s){this.router=t,this.alertService=s,this.id="default-alert",this.fade=!0,this.alerts=[]}ngOnInit(){this.alertSubscription=this.alertService.onAlert(this.id).subscribe(t=>{if(!t.message)return this.alerts=this.alerts.filter(s=>s.keepAfterRouteChange),void this.alerts.forEach(s=>delete s.keepAfterRouteChange);this.alerts.push(t),t.autoClose&&setTimeout(()=>this.removeAlert(t),3e3)}),this.routeSubscription=this.router.events.subscribe(t=>{t instanceof a.OD&&this.alertService.clear(this.id)})}ngOnDestroy(){this.alertSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}removeAlert(t){!this.alerts.includes(t)||(this.fade?(t.fade=!0,setTimeout(()=>{this.alerts=this.alerts.filter(s=>s!==t)},250)):this.alerts=this.alerts.filter(s=>s!==t))}cssClass(t){if(!t)return;const s=["alert","alert-dismissable","mt-4","container"];return s.push({[d.N.Success]:"alert alert-success",[d.N.Error]:"alert alert-danger",[d.N.Info]:"alert alert-info",[d.N.Warning]:"alert alert-warning"}[t.type]),t.fade&&s.push("fade"),s.join(" ")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.F0),e.Y36(l.c9))},i.\u0275cmp=e.Xpm({type:i,selectors:[["alert"]],inputs:{id:"id",fade:"fade"},decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],[1,"close",3,"click"],[3,"innerHTML"]],template:function(t,s){1&t&&e.YNc(0,C,4,4,"div",0),2&t&&e.Q6J("ngForOf",s.alerts)},directives:[m.sg],encapsulation:2}),i})(),Z=(()=>{class i{constructor(t,s){this.router=t,this.accountService=s,this.accountService.userValue&&this.router.navigate(["/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.F0),e.Y36(l.BR))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:4,vars:0,consts:[[1,"container-authorization"],[1,"alert-form"],[1,"layout-form"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"alert",1),e.TgZ(2,"div",2),e._UZ(3,"router-outlet"),e.qZA()())},directives:[h,a.lC],encapsulation:2}),i})();var f=c(7224);function T(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."),e.qZA())}function A(i,u){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,T,2,0,"div",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.username.errors.required)}}function x(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."),e.qZA())}function k(i,u){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,x,2,0,"div",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.password.errors.required)}}function b(i,u){1&i&&e._UZ(0,"span",15)}const v=function(i){return{"is-invalid":i}},g=function(i){return{"is-invalid":i}};function N(i,u){if(1&i&&e._UZ(0,"img",26),2&i){const t=e.oxw();e.Q6J("src",t.photo,e.LSH)("ngClass",e.VKq(2,g,t.submitted&&t.f.photo.errors))}}function J(i,u){1&i&&e._UZ(0,"img",27)}function R(i,u){if(1&i){const t=e.EpF();e.TgZ(0,"div",28)(1,"img",29),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/1.png")}),e.qZA(),e.TgZ(2,"img",30),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/2.png")}),e.qZA(),e.TgZ(3,"img",31),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/3.png")}),e.qZA(),e.TgZ(4,"img",32),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/4.png")}),e.qZA(),e.TgZ(5,"img",33),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/5.png")}),e.qZA(),e.TgZ(6,"img",34),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/6.png")}),e.qZA(),e.TgZ(7,"img",35),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/7.png")}),e.qZA(),e.TgZ(8,"img",36),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/8.png")}),e.qZA(),e.TgZ(9,"img",37),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/9.png")}),e.qZA(),e.TgZ(10,"img",38),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/10.png")}),e.qZA(),e.TgZ(11,"img",39),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/11.png")}),e.qZA(),e.TgZ(12,"img",40),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/12.png")}),e.qZA(),e.TgZ(13,"img",41),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/13.png")}),e.qZA(),e.TgZ(14,"img",42),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/14.png")}),e.qZA(),e.TgZ(15,"img",43),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/15.png")}),e.qZA(),e.TgZ(16,"img",44),e.NdJ("click",function(r){return e.CHM(t),e.oxw().editAvatar(r,"./assets/images/users/16.png")}),e.qZA()()}}function w(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e!"),e.qZA())}function B(i,u){if(1&i&&(e.TgZ(0,"div",45),e.YNc(1,w,2,0,"div",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.photo.errors.required)}}function F(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."),e.qZA())}function I(i,u){if(1&i&&(e.TgZ(0,"div",47),e.YNc(1,F,2,0,"div",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.firstName.errors.required)}}function E(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."),e.qZA())}function U(i,u){if(1&i&&(e.TgZ(0,"div",47),e.YNc(1,E,2,0,"div",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.lastName.errors.required)}}function Y(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u042d\u0442\u043e \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."),e.qZA())}function Q(i,u){if(1&i&&(e.TgZ(0,"div",47),e.YNc(1,Y,2,0,"div",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.username.errors.required)}}function S(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1," \u043f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c."),e.qZA())}function y(i,u){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 \u0447\u0435\u043c \u0438\u0437 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e"),e.qZA())}function M(i,u){if(1&i&&(e.TgZ(0,"div",47),e.YNc(1,S,2,0,"div",46),e.YNc(2,y,2,0,"div",46),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",t.f.password.errors.minlength)}}function L(i,u){1&i&&e._UZ(0,"span",48)}const D=[{path:"",component:Z,children:[{path:"login",component:(()=>{class i{constructor(t,s,r,o,p){this.formBuilder=t,this.route=s,this.router=r,this.accountService=o,this.alertService=p,this.loading=!1,this.submitted=!1}ngOnInit(){this.form=this.formBuilder.group({username:["",n.kI.required],password:["",n.kI.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.login(this.f.username.value,this.f.password.value).pipe((0,f.P)()).subscribe({next:t=>{this.router.navigate(["/home/project"],{relativeTo:this.route})},error:t=>{this.alertService.error("\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),this.loading=!1}}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.qu),e.Y36(a.gz),e.Y36(a.F0),e.Y36(l.BR),e.Y36(l.c9))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:21,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","username"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../register",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),e.qZA(),e.TgZ(3,"div",2)(4,"form",3),e.NdJ("ngSubmit",function(){return s.onSubmit()}),e.TgZ(5,"div",4)(6,"label",5),e._uU(7,"\u041b\u043e\u0433\u0438\u043d"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,A,2,1,"div",7),e.qZA(),e.TgZ(10,"div",4)(11,"label",8),e._uU(12,"\u041f\u0430\u0440\u043e\u043b\u044c"),e.qZA(),e._UZ(13,"input",9),e.YNc(14,k,2,1,"div",7),e.qZA(),e.TgZ(15,"div",4)(16,"button",10),e.YNc(17,b,1,0,"span",11),e._uU(18," \u0412\u043e\u0439\u0442\u0438 "),e.qZA(),e.TgZ(19,"a",12),e._uU(20,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",s.form),e.xp6(4),e.Q6J("ngClass",e.VKq(7,v,s.submitted&&s.f.username.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.username.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(9,v,s.submitted&&s.f.password.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.password.errors),e.xp6(2),e.Q6J("disabled",s.loading),e.xp6(1),e.Q6J("ngIf",s.loading))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,m.mk,m.O5,a.yS],encapsulation:2}),i})()},{path:"register",component:(()=>{class i{constructor(t,s,r,o,p){this.formBuilder=t,this.route=s,this.router=r,this.accountService=o,this.alertService=p,this.loading=!1,this.submitted=!1,this.checkedAvatar=!1,this.photo=""}ngOnInit(){this.form=this.formBuilder.group({firstName:["",n.kI.required],lastName:["",n.kI.required],username:["",n.kI.required],password:["",[n.kI.required,n.kI.minLength(6)]],photo:["",n.kI.required]})}get f(){return this.form.controls}editAvatar(t,s){this.form.get("photo").setValue(s),this.photo=s,this.checkedAvatar=!1}buttonEditAvatar(t){this.checkedAvatar=!0}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.createUser(this.form.value).pipe((0,f.P)()).subscribe({next:t=>{this.alertService.success("Registration successful",{keepAfterRouteChange:!0}),this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.alertService.error(t.error),this.loading=!1}}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.qu),e.Y36(a.gz),e.Y36(a.F0),e.Y36(l.BR),e.Y36(l.c9))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:41,vars:23,consts:[[1,"card",2,"width","500px"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"form-row","form-avatar"],[1,"selected-avatar"],["id","image",3,"src","ngClass",4,"ngIf"],["class","no_photo","src","./assets/images/users/no_user.png","id","image",4,"ngIf"],["class","avatar",4,"ngIf"],[1,"form-group",2,"width","50%"],[1,"button-photo",2,"width","100%"],[1,"buttons",3,"click"],["class","invalid-feedback avatar-validate",4,"ngIf"],[1,"form-group"],["for","firstName"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","lastName"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["for","username"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","login",1,"btn","btn-link"],["id","image",3,"src","ngClass"],["src","./assets/images/users/no_user.png","id","image",1,"no_photo"],[1,"avatar"],["src","./assets/images/users/1.png","id","image",3,"click"],["src","./assets/images/users/2.png","id","image",3,"click"],["src","./assets/images/users/3.png","id","image",3,"click"],["src","./assets/images/users/4.png","id","image",3,"click"],["src","./assets/images/users/5.png","id","image",3,"click"],["src","./assets/images/users/6.png","id","image",3,"click"],["src","./assets/images/users/7.png","id","image",3,"click"],["src","./assets/images/users/8.png","id","image",3,"click"],["src","./assets/images/users/9.png","id","image",3,"click"],["src","./assets/images/users/10.png","id","image",3,"click"],["src","./assets/images/users/11.png","id","image",3,"click"],["src","./assets/images/users/12.png","id","image",3,"click"],["src","./assets/images/users/13.png","id","image",3,"click"],["src","./assets/images/users/14.png","id","image",3,"click"],["src","./assets/images/users/15.png","id","image",3,"click"],["src","./assets/images/users/16.png","id","image",3,"click"],[1,"invalid-feedback","avatar-validate"],[4,"ngIf"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),e.qZA(),e.TgZ(3,"div",2)(4,"form",3)(5,"div",4)(6,"div",5),e.YNc(7,N,1,4,"img",6),e.YNc(8,J,1,0,"img",7),e.qZA(),e.YNc(9,R,17,0,"div",8),e.qZA(),e.TgZ(10,"div",9)(11,"div",10)(12,"button",11),e.NdJ("click",function(o){return s.buttonEditAvatar(o)}),e._uU(13,"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"),e.qZA(),e.YNc(14,B,2,1,"div",12),e.qZA()(),e.TgZ(15,"div",13)(16,"label",14),e._uU(17,"\u0418\u043c\u044f"),e.qZA(),e._UZ(18,"input",15),e.YNc(19,I,2,1,"div",16),e.qZA(),e.TgZ(20,"div",13)(21,"label",17),e._uU(22,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),e.qZA(),e._UZ(23,"input",18),e.YNc(24,U,2,1,"div",16),e.qZA(),e.TgZ(25,"div",13)(26,"label",19),e._uU(27,"\u041b\u043e\u0433\u0438\u043d"),e.qZA(),e._UZ(28,"input",20),e.YNc(29,Q,2,1,"div",16),e.qZA(),e.TgZ(30,"div",13)(31,"label",21),e._uU(32,"\u041f\u0430\u0440\u043e\u043b\u044c"),e.qZA(),e._UZ(33,"input",22),e.YNc(34,M,3,2,"div",16),e.qZA(),e.TgZ(35,"div",13)(36,"button",23),e.NdJ("click",function(){return s.onSubmit()}),e.YNc(37,L,1,0,"span",24),e._uU(38," \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f "),e.qZA(),e.TgZ(39,"a",25),e._uU(40,"Cancel"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("ngIf",s.photo),e.xp6(1),e.Q6J("ngIf",!s.photo),e.xp6(1),e.Q6J("ngIf",s.checkedAvatar),e.xp6(5),e.Q6J("ngIf",s.submitted&&s.f.photo.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(15,g,s.submitted&&s.f.firstName.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.firstName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(17,g,s.submitted&&s.f.lastName.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.lastName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(19,g,s.submitted&&s.f.username.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.username.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(21,g,s.submitted&&s.f.password.errors)),e.xp6(1),e.Q6J("ngIf",s.submitted&&s.f.password.errors),e.xp6(2),e.Q6J("disabled",s.loading),e.xp6(1),e.Q6J("ngIf",s.loading))},directives:[n._Y,n.JL,n.sg,m.O5,m.mk,n.Fj,n.JJ,n.u,a.yS],encapsulation:2}),i})()}]}];let H=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[a.Bz.forChild(D)],a.Bz]}),i})(),O=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.ez,n.UX,H]]}),i})()}}]);